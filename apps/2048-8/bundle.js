(()=>{var e={673:(e,t,o)=>{"use strict";o.d(t,{Z:()=>a});var n=o(81),r=o.n(n),i=o(645),p=o.n(i)()(r());p.push([e.id,"html,body{height:100%;width:100%;margin:0px;padding:0px}body{display:flex;flex-direction:column;align-items:center;justify-content:center;background-color:#fff;font-family:Verdana,sans-serif;color:#000}.action{display:flex;width:525px;justify-content:space-between;align-content:center}.action .btn-container{display:flex;align-items:center}.action .btn-container .refresh-count{position:absolute;text-align:center;line-height:20px;top:-9px;left:-9px;font-size:18px;height:20px;width:20px;border-radius:50%;background-color:#fff;box-shadow:0px 0px 2px rgba(0,0,0,.5);color:#000}.action .btn-container .btn{display:flex;justify-content:center;align-items:center;border-radius:5px;padding:3px;height:26px;width:26px;box-shadow:0px 0px 2px rgba(0,0,0,.5);margin-left:10px;cursor:pointer;transform:scale(1);transition:transform .1s}.action .btn-container .btn:hover{transform:scale(1.2)}.action .btn-container .btn .icon{height:20px;width:20px}.action .btn-container .btn .icon svg{height:100%;width:100%}.action .btn-container .btn.refresh svg{fill:red}.action .btn-container .btn.back{position:relative}.action .btn-container .btn.back svg{fill:green}.action .score-container{display:flex;align-items:flex-end;flex-direction:column}.action .score-container .score{font-size:26px;display:flex;align-items:center;flex-direction:row-reverse}@keyframes newtile{0%{transform:scale(0.5)}100%{transform:scale(1)}}@keyframes movetile{0%{transform:scale(1)}40%{transform:scale(1.2)}100%{transform:scale(1)}}.movetile{animation-name:movetile;animation-duration:.3s;animation-delay:.2s}.newtile{animation-name:newtile;animation-duration:.15s}.app{box-shadow:0px 0px 5px rgba(0,0,0,.5);border-radius:5px;min-height:525px;min-width:525px;position:relative;background-color:#aaa}.app .game-over{height:525px;width:525px;position:absolute;top:0px;left:0px;display:none;align-items:center;justify-content:center;font-size:40px;background-color:rgba(255,255,255,.6);border-radius:5px;z-index:10}.app .sqr-row{display:flex}.app .sqr-row:last-child{margin-bottom:5px}.app .sqr-row .sqr{box-sizing:border-box;height:60px;width:60px;background-color:#ddd;background-repeat:no-repeat;border-radius:5px;margin-left:5px;margin-top:5px;box-shadow:0px 0px 2px rgba(0,0,0,.5)}.app .sqr-row .sqr:last-child{margin-right:5px}.app .sqr1-1{background-position:0px 0px}.app .sqr1-2{background-position:-65px 0px}.app .sqr1-3{background-position:-130px 0px}.app .sqr1-4{background-position:-195px 0px}.app .sqr1-5{background-position:-260px 0px}.app .sqr1-6{background-position:-325px 0px}.app .sqr1-7{background-position:-390px 0px}.app .sqr1-8{background-position:-455px 0px}.app .sqr2-1{background-position:0px -65px}.app .sqr2-2{background-position:-65px -65px}.app .sqr2-3{background-position:-130px -65px}.app .sqr2-4{background-position:-195px -65px}.app .sqr2-5{background-position:-260px -65px}.app .sqr2-6{background-position:-325px -65px}.app .sqr2-7{background-position:-390px -65px}.app .sqr2-8{background-position:-455px -65px}.app .sqr3-1{background-position:0px -130px}.app .sqr3-2{background-position:-65px -130px}.app .sqr3-3{background-position:-130px -130px}.app .sqr3-4{background-position:-195px -130px}.app .sqr3-5{background-position:-260px -130px}.app .sqr3-6{background-position:-325px -130px}.app .sqr3-7{background-position:-390px -130px}.app .sqr3-8{background-position:-455px -130px}.app .sqr4-1{background-position:0px -195px}.app .sqr4-2{background-position:-65px -195px}.app .sqr4-3{background-position:-130px -195px}.app .sqr4-4{background-position:-195px -195px}.app .sqr4-5{background-position:-260px -195px}.app .sqr4-6{background-position:-325px -195px}.app .sqr4-7{background-position:-390px -195px}.app .sqr4-8{background-position:-455px -195px}.app .sqr5-1{background-position:0px -260px}.app .sqr5-2{background-position:-65px -260px}.app .sqr5-3{background-position:-130px -260px}.app .sqr5-4{background-position:-195px -260px}.app .sqr5-5{background-position:-260px -260px}.app .sqr5-6{background-position:-325px -260px}.app .sqr5-7{background-position:-390px -260px}.app .sqr5-8{background-position:-455px -260px}.app .sqr6-1{background-position:0px -325px}.app .sqr6-2{background-position:-65px -325px}.app .sqr6-3{background-position:-130px -325px}.app .sqr6-4{background-position:-195px -325px}.app .sqr6-5{background-position:-260px -325px}.app .sqr6-6{background-position:-325px -325px}.app .sqr6-7{background-position:-390px -325px}.app .sqr6-8{background-position:-455px -325px}.app .sqr7-1{background-position:0px -390px}.app .sqr7-2{background-position:-65px -390px}.app .sqr7-3{background-position:-130px -390px}.app .sqr7-4{background-position:-195px -390px}.app .sqr7-5{background-position:-260px -390px}.app .sqr7-6{background-position:-325px -390px}.app .sqr7-7{background-position:-390px -390px}.app .sqr7-8{background-position:-455px -390px}.app .sqr8-1{background-position:0px -455px}.app .sqr8-2{background-position:-65px -455px}.app .sqr8-3{background-position:-130px -455px}.app .sqr8-4{background-position:-195px -455px}.app .sqr8-5{background-position:-260px -455px}.app .sqr8-6{background-position:-325px -455px}.app .sqr8-7{background-position:-390px -455px}.app .sqr8-8{background-position:-455px -455px}.app .tile-container{position:absolute;top:0px;left:0px}.app .tile-container .tile{height:60px;width:60px;border-radius:5px;position:absolute;display:flex;justify-content:center;align-items:center;transition:top 0.1s,left 0.1s}.app .tile-container .f1-1{top:5px;left:5px}.app .tile-container .f1-2{top:5px;left:70px}.app .tile-container .f1-3{top:5px;left:135px}.app .tile-container .f1-4{top:5px;left:200px}.app .tile-container .f1-5{top:5px;left:265px}.app .tile-container .f1-6{top:5px;left:330px}.app .tile-container .f1-7{top:5px;left:395px}.app .tile-container .f1-8{top:5px;left:460px}.app .tile-container .f2-1{top:70px;left:5px}.app .tile-container .f2-2{top:70px;left:70px}.app .tile-container .f2-3{top:70px;left:135px}.app .tile-container .f2-4{top:70px;left:200px}.app .tile-container .f2-5{top:70px;left:265px}.app .tile-container .f2-6{top:70px;left:330px}.app .tile-container .f2-7{top:70px;left:395px}.app .tile-container .f2-8{top:70px;left:460px}.app .tile-container .f3-1{top:135px;left:5px}.app .tile-container .f3-2{top:135px;left:70px}.app .tile-container .f3-3{top:135px;left:135px}.app .tile-container .f3-4{top:135px;left:200px}.app .tile-container .f3-5{top:135px;left:265px}.app .tile-container .f3-6{top:135px;left:330px}.app .tile-container .f3-7{top:135px;left:395px}.app .tile-container .f3-8{top:135px;left:460px}.app .tile-container .f4-1{top:200px;left:5px}.app .tile-container .f4-2{top:200px;left:70px}.app .tile-container .f4-3{top:200px;left:135px}.app .tile-container .f4-4{top:200px;left:200px}.app .tile-container .f4-5{top:200px;left:265px}.app .tile-container .f4-6{top:200px;left:330px}.app .tile-container .f4-7{top:200px;left:395px}.app .tile-container .f4-8{top:200px;left:460px}.app .tile-container .f5-1{top:265px;left:5px}.app .tile-container .f5-2{top:265px;left:70px}.app .tile-container .f5-3{top:265px;left:135px}.app .tile-container .f5-4{top:265px;left:200px}.app .tile-container .f5-5{top:265px;left:265px}.app .tile-container .f5-6{top:265px;left:330px}.app .tile-container .f5-7{top:265px;left:395px}.app .tile-container .f5-8{top:265px;left:460px}.app .tile-container .f6-1{top:330px;left:5px}.app .tile-container .f6-2{top:330px;left:70px}.app .tile-container .f6-3{top:330px;left:135px}.app .tile-container .f6-4{top:330px;left:200px}.app .tile-container .f6-5{top:330px;left:265px}.app .tile-container .f6-6{top:330px;left:330px}.app .tile-container .f6-7{top:330px;left:395px}.app .tile-container .f6-8{top:330px;left:460px}.app .tile-container .f7-1{top:395px;left:5px}.app .tile-container .f7-2{top:395px;left:70px}.app .tile-container .f7-3{top:395px;left:135px}.app .tile-container .f7-4{top:395px;left:200px}.app .tile-container .f7-5{top:395px;left:265px}.app .tile-container .f7-6{top:395px;left:330px}.app .tile-container .f7-7{top:395px;left:395px}.app .tile-container .f7-8{top:395px;left:460px}.app .tile-container .f8-1{top:460px;left:5px}.app .tile-container .f8-2{top:460px;left:70px}.app .tile-container .f8-3{top:460px;left:135px}.app .tile-container .f8-4{top:460px;left:200px}.app .tile-container .f8-5{top:460px;left:265px}.app .tile-container .f8-6{top:460px;left:330px}.app .tile-container .f8-7{top:460px;left:395px}.app .tile-container .f8-8{top:460px;left:460px}.t0{background-color:#ffe6b3;color:#000;font-size:40px}.t1{background-color:#ffdc98;color:#000;font-size:40px}.t2{background-color:#ffd57f;color:#000;font-size:40px}.t3{background-color:#fc6;color:#000;font-size:40px}.t4{background-color:#ff894c;color:#000;font-size:36px}.t5{background-color:#fe0000;color:#fff;font-size:36px}.t6{background-color:#ff3334;color:#fff;font-size:36px}.t7{background-color:#ff4d4d;color:#fff;font-size:32px}.t8{background-color:#ff6766;color:#fff;font-size:32px}.t9{background-color:#ff999a;color:#000;font-size:32px}.t10{background-color:#87ff4d;color:#000;font-size:28px}.t11{background-color:#62ff1a;color:#000;font-size:28px}.t12{background-color:#51ff00;color:#000;font-size:28px}.t13{background-color:#00ff01;color:#fff;font-size:28px}.t14{background-color:#00ffab;color:#000;font-size:24px}.t15{background-color:#66cbff;color:#000;font-size:24px}.t16{background-color:#1865ff;color:#fff;font-size:24px}.t17{background-color:#1865ff;color:#fff;font-size:20px}.t18{background-color:#1865ff;color:#fff;font-size:20px}.t19{background-color:#1865ff;color:#fff;font-size:20px}.t20{background-color:#1865ff;color:#fff;font-size:16px}.t21{background-color:#1865ff;color:#fff;font-size:16px}.t22{background-color:#1865ff;color:#fff;font-size:16px}.t23{background-color:#1865ff;color:#fff;font-size:16px}.t24{background-color:#1865ff;color:#fff;font-size:12px}.t25{background-color:#1865ff;color:#fff;font-size:12px}.t26{background-color:#1865ff;color:#fff;font-size:12px}.t27{background-color:#1865ff;color:#fff;font-size:8px}.t28{background-color:#1865ff;color:#fff;font-size:8px}.t29{background-color:#1865ff;color:#fff;font-size:8px}.t30{background-color:#1865ff;color:#fff;font-size:4px}.t31{background-color:#1865ff;color:#fff;font-size:4px}.t32{background-color:#1865ff;color:#fff;font-size:4px}.t33{background-color:#1865ff;color:#fff;font-size:4px}.t34{background-color:#1865ff;color:#fff;font-size:0px}.t35{background-color:#1865ff;color:#fff;font-size:0px}.t36{background-color:#1865ff;color:#fff;font-size:0px}.t37{background-color:#1865ff;color:#fff;font-size:-4px}.t38{background-color:#1865ff;color:#fff;font-size:-4px}.t39{background-color:#1865ff;color:#fff;font-size:-4px}.t40{background-color:#1865ff;color:#fff;font-size:-8px}.t41{background-color:#1865ff;color:#fff;font-size:-8px}.t42{background-color:#1865ff;color:#fff;font-size:-8px}.t43{background-color:#1865ff;color:#fff;font-size:-8px}.t44{background-color:#1865ff;color:#fff;font-size:-12px}.t45{background-color:#1865ff;color:#fff;font-size:-12px}.t46{background-color:#1865ff;color:#fff;font-size:-12px}.t47{background-color:#1865ff;color:#fff;font-size:-16px}.t48{background-color:#1865ff;color:#fff;font-size:-16px}.t49{background-color:#1865ff;color:#fff;font-size:-16px}.t50{background-color:#1865ff;color:#fff;font-size:-20px}.t51{background-color:#1865ff;color:#fff;font-size:-20px}.t52{background-color:#1865ff;color:#fff;font-size:-20px}.t53{background-color:#1865ff;color:#fff;font-size:-20px}.t54{background-color:#1865ff;color:#fff;font-size:-24px}.t55{background-color:#1865ff;color:#fff;font-size:-24px}.t56{background-color:#1865ff;color:#fff;font-size:-24px}.t57{background-color:#1865ff;color:#fff;font-size:-28px}.t58{background-color:#1865ff;color:#fff;font-size:-28px}.t59{background-color:#1865ff;color:#fff;font-size:-28px}.t60{background-color:#1865ff;color:#fff;font-size:-32px}.t61{background-color:#1865ff;color:#fff;font-size:-32px}.t62{background-color:#1865ff;color:#fff;font-size:-32px}.t63{background-color:#1865ff;color:#fff;font-size:-32px}.t64{background-color:#1865ff;color:#fff;font-size:-36px}.credits{margin-top:10px;font-size:14px;text-align:center}.heading{font-size:50px}",""]);const a=p},645:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var o="",n=void 0!==t[5];return t[4]&&(o+="@supports (".concat(t[4],") {")),t[2]&&(o+="@media ".concat(t[2]," {")),n&&(o+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),o+=e(t),n&&(o+="}"),t[2]&&(o+="}"),t[4]&&(o+="}"),o})).join("")},t.i=function(e,o,n,r,i){"string"==typeof e&&(e=[[null,e,void 0]]);var p={};if(n)for(var a=0;a<this.length;a++){var c=this[a][0];null!=c&&(p[c]=!0)}for(var s=0;s<e.length;s++){var f=[].concat(e[s]);n&&p[f[0]]||(void 0!==i&&(void 0===f[5]||(f[1]="@layer".concat(f[5].length>0?" ".concat(f[5]):""," {").concat(f[1],"}")),f[5]=i),o&&(f[2]?(f[1]="@media ".concat(f[2]," {").concat(f[1],"}"),f[2]=o):f[2]=o),r&&(f[4]?(f[1]="@supports (".concat(f[4],") {").concat(f[1],"}"),f[4]=r):f[4]="".concat(r)),t.push(f))}},t}},81:e=>{"use strict";e.exports=function(e){return e[1]}},379:e=>{"use strict";var t=[];function o(e){for(var o=-1,n=0;n<t.length;n++)if(t[n].identifier===e){o=n;break}return o}function n(e,n){for(var i={},p=[],a=0;a<e.length;a++){var c=e[a],s=n.base?c[0]+n.base:c[0],f=i[s]||0,l="".concat(s," ").concat(f);i[s]=f+1;var u=o(l),d={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==u)t[u].references++,t[u].updater(d);else{var x=r(d,n);n.byIndex=a,t.splice(a,0,{identifier:l,updater:x,references:1})}p.push(l)}return p}function r(e,t){var o=t.domAPI(t);return o.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;o.update(e=t)}else o.remove()}}e.exports=function(e,r){var i=n(e=e||[],r=r||{});return function(e){e=e||[];for(var p=0;p<i.length;p++){var a=o(i[p]);t[a].references--}for(var c=n(e,r),s=0;s<i.length;s++){var f=o(i[s]);0===t[f].references&&(t[f].updater(),t.splice(f,1))}i=c}}},569:e=>{"use strict";var t={};e.exports=function(e,o){var n=function(e){if(void 0===t[e]){var o=document.querySelector(e);if(window.HTMLIFrameElement&&o instanceof window.HTMLIFrameElement)try{o=o.contentDocument.head}catch(e){o=null}t[e]=o}return t[e]}(e);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");n.appendChild(o)}},216:e=>{"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},565:(e,t,o)=>{"use strict";e.exports=function(e){var t=o.nc;t&&e.setAttribute("nonce",t)}},795:e=>{"use strict";e.exports=function(e){var t=e.insertStyleElement(e);return{update:function(o){!function(e,t,o){var n="";o.supports&&(n+="@supports (".concat(o.supports,") {")),o.media&&(n+="@media ".concat(o.media," {"));var r=void 0!==o.layer;r&&(n+="@layer".concat(o.layer.length>0?" ".concat(o.layer):""," {")),n+=o.css,r&&(n+="}"),o.media&&(n+="}"),o.supports&&(n+="}");var i=o.sourceMap;i&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),t.styleTagTransform(n,e,t.options)}(t,e,o)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},589:e=>{"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},368:e=>{e.exports='<svg version="1.1" viewBox="0 0 33.867 33.867" xmlns="http://www.w3.org/2000/svg"><g transform="translate(0 -263.13)"><rect x="1.8521" y="264.99" width="30.162" height="30.162" rx="7.9375" ry="7.9375"></rect></g></svg>'},835:e=>{e.exports='<svg version="1.1" viewBox="0 0 33.867 33.867" xmlns="http://www.w3.org/2000/svg"><g transform="translate(0 -263.13)"><path transform="rotate(126.88 20.11 280.87)" d="m30.034 295.44c-2.4736 1.8552-28.064-9.0761-28.434-12.146s21.892-19.766 24.736-18.552 6.1721 28.843 3.6985 30.698z"></path></g></svg>'}},t={};function o(n){var r=t[n];if(void 0!==r)return r.exports;var i=t[n]={id:n,exports:{}};return e[n](i,i.exports,o),i.exports}o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.nc=void 0,(()=>{"use strict";var e=o(379),t=o.n(e),n=o(795),r=o.n(n),i=o(569),p=o.n(i),a=o(565),c=o.n(a),s=o(216),f=o.n(s),l=o(589),u=o.n(l),d=o(673),x={};x.styleTagTransform=u(),x.setAttributes=c(),x.insert=p().bind(null,"head"),x.domAPI=r(),x.insertStyleElement=f(),t()(d.Z,x),d.Z&&d.Z.locals&&d.Z.locals;var g=function(e){return{set:function(t){e.innerText=t}}},b=function(e,t){if("object"!=typeof e)throw{type:"TypeError",message:"expecting source to be a object"};if(t&&"object"!=typeof e)throw{type:"TypeError",message:"expecting destination to be a object"};for(var o in t||(t="[object Array]"===Object.prototype.toString.apply(e)?[]:{}),e)Object.prototype.hasOwnProperty.apply(e,[o])&&("object"!=typeof e[o]?t[o]=e[o]:t[o]=b(e[o]));return t},v=function(e){if("function"!=typeof e)throw{name:"TypeError",message:"expecting a function as first argument"};var t=Array.prototype.slice.apply(arguments,[1]);return function(){var o=Array.prototype.slice.apply(arguments);return e.apply(null,t.concat(o))}},h=function(){var e=[];return{publish:function(){var t;for(t=0;t<e.length;t++)"function"==typeof e[t]&&e[t].apply(null,arguments)},subscribe:function(t){return"function"==typeof t&&e.push(t),{unsubscribe:function(){var o=e.indexOf(t);e.splice(o,1)}}}}},m=function(e,t,o){var n=function(n,r,i,p){var a;switch(r.action){case o.actions.DEL:t.setPosition({pos:[i,p],value:0,level:0});break;case o.actions.MOVE:n&&n(i,p,r),t.setPosition({pos:[i,p],value:0,noview:!0,level:0});break;case o.actions.DOUBLE:var c=t.getTile(i,p);a=window.app2048.collision(c.value),t.setPosition({pos:[i,p],value:a,level:c.level+1,action:"double"}),"function"==typeof e&&e(a)}},r=function(e,o,n){t.getTile(e,o).value&&t.setPosition({pos:[e-n.distance,o],value:t.getTile(e,o).value,level:t.getTile(e,o).level,noview:!1,posFrom:[e,o]})},i=function(e,o,n){t.getTile(e,o).value&&t.setPosition({pos:[e+n.distance,o],value:t.getTile(e,o).value,level:t.getTile(e,o).level,noview:!1,posFrom:[e,o]})},p=function(e,o,n){t.getTile(e,o).value&&t.setPosition({pos:[e,o-n.distance],value:t.getTile(e,o).value,level:t.getTile(e,o).level,noview:!1,posFrom:[e,o]})},a=function(e,o,n){t.getTile(e,o).value&&t.setPosition({pos:[e,o+n.distance],value:t.getTile(e,o).value,level:t.getTile(e,o).level,noview:!1,posFrom:[e,o]})},c=function(e,t,r){return function(e,t,n){var r=!0,i=o.getActions(e,t).sort((function(e,t){return e.action-t.action}));return 0===o.getActions(e,t).filter((function(e){return e.action===o.actions.MOVE})).length&&(r=!1),i&&i.length>0&&i.forEach((function(o){n&&n(o,e,t)})),{movement:r}}(e,t,v(n,r))};return{up:function(e,t){return c(e,t,r)},down:function(e,t){return c(e,t,i)},left:function(e,t){return c(e,t,p)},right:function(e,t){return c(e,t,a)}}},k="set-score",y="add-score",w="set-game-over",z="unset-game-over",q=function(){return{type:z}},S=function(e,t){switch(t.type){case k:return Object.assign(e,{score:t.payload.score});case y:var o=e.score+t.payload.score;return o>e.highScore&&(e.highScore=o),Object.assign(e,{score:o});case"set-game-won":return Object.assign(e,{won:!0});case"unset-game-won":return Object.assign(e,{won:!1});case w:return Object.assign(e,{gameover:!0});case z:return Object.assign(e,{gameover:!1})}},T=function(e){var t=e.model,o=e.randomizer,n=e.winTile||2048,r=function(e,t){if(!t)throw{name:"TypeError",message:"reducer is not passed to the store"};if("function"!=typeof t)throw{name:"TypeError",message:"reducer should be a function"};e=e||{};var o=h(),n=function(){return b(e)},r=function(t){if("[object Array]"!==Object.prototype.toString.apply(t))throw{name:"TypeError",message:"expecting an array"};var o;try{o=t.reduce((function(e,t){return e[t]}),e)}catch(e){throw{name:"PathError",message:"property doesn't exist on the store"}}return"object"==typeof o?b(o):o};return{dispatch:function(i){e=t(e,i),o.publish(i,{getState:n,getFromPath:r})},doOnStateChange:o,getFromPath:r,getState:n,restore:function(t){t&&"object"==typeof t&&(e=Object.assign(e,t),o.publish({restore:!0},{getState:n,getFromPath:r}))}}}({highScore:0,score:0},S),i=h(),p=h(),a=h(),c=h(),s=h(),f=h(),l=function(e){r.dispatch(function(e){return{type:k,payload:{score:e}}}(e))};r.doOnStateChange.subscribe((function(e,t){if(e.restore)return(t=t.getState()).gameover&&c.publish(),t.won&&p.publish(),void i.publish({score:t.score,highScore:t.highScore||0});switch(e.type){case k:i.publish({score:t.getFromPath(["score"]),highScore:t.getFromPath(["highScore"])});break;case y:o=t.getFromPath(["score"]),r=t.getFromPath(["highScore"]),o===n&&p.publish(o),i.publish({score:o,highScore:r});break;case w:c.publish();break;case z:s.publish()}var o,r})),l(0);var u=function(e){var t=[],o=h(),n=h(),r=function(){return t.length};return{push:function(i){t.length<e?(t.push(i),o.publish(r())):(t.shift(),t.push(i)),n.publish(b(t))},maxSize:function(){return e},size:r,pop:function(){var e=t.pop();return e&&o.publish(r()),e||null},clean:function(){t=[],o.publish(0)},restore:function(e){t=e},doOnSizeChange:o,doOnStorePush:n}}(e.cacheSize||5),d=t.getSize(),x=function(e){var t={DOUBLE:0,MOVE:1,DEL:2};"number"!=typeof e&&(e=4);var o=function(){var t,o,n=[];for(t=0;t<e;t++)for(n.push([]),o=0;o<e;o++)n[t].push([]);return n},n=o();return{getMatrix:function(){return b(n)},get actions(){return t},addAction:function(e,o,r){e.action!==t.DEL&&n[o][r]?n[o][r].push(e):n[o][r]=[e]},reset:function(){n=o()},getActions:function(e,t){return n[e]&&n[e][t]}}}(d),g=v(m,(function(e){!function(e){r.dispatch(function(e){return{type:y,payload:{score:e}}}(e))}(e)})),T=function(e){var n={model:t.getModel(),state:r.getState()};if(function(e){var o,n,r=function(e,t){var o=0,n=0,r=[];return{decide:function(i,p){0===e.getTile(i,p).value?n++:e.getTile(i,p).value===o?(t.addAction({action:t.actions.DEL},r[0],r[1]),n++,t.addAction({action:t.actions.DOUBLE},i,p),t.addAction({action:t.actions.MOVE,distance:n},i,p),o=0):(o=e.getTile(i,p).value,0!==n&&t.addAction({action:t.actions.MOVE,distance:n},i,p),r=[i,p])},reset:function(){r=[],n=0,o=0}}}(t,x);switch(e){case 0:for(n=0;n<d;n++){for(o=0;o<d;o++)r.decide(o,n);r.reset()}break;case 1:for(n=0;n<d;n++){for(o=d-1;o>=0;o--)r.decide(o,n);r.reset()}break;case 2:for(o=0;o<d;o++){for(n=0;n<d;n++)r.decide(o,n);r.reset()}break;case 3:for(o=0;o<d;o++){for(n=d-1;n>=0;n--)r.decide(o,n);r.reset()}}}(e),function(e){var o,n,r=g(t,x),i=!1;switch(e){case 0:for(n=0;n<d;n++)for(o=0;o<d;o++)i=r.up(o,n).movement||i;break;case 1:for(n=0;n<d;n++)for(o=d-1;o>=0;o--)i=r.down(o,n).movement||i;break;case 2:for(o=0;o<d;o++)for(n=0;n<d;n++)i=r.left(o,n).movement||i;break;case 3:for(o=0;o<d;o++)for(n=d-1;n>=0;n--)i=r.right(o,n).movement||i}return x.reset(),{movement:i}}(e).movement){u.push(n),a.publish(n.model);var i=o.getNextPosition(),p=o.getNextNumber();setTimeout((function(){t.setPosition({pos:i,value:p,level:2===p?1:2}),function(e){var t,o,n,r=!1;e:for(t=0;t<d;t++)for(o=0;o<d;o++){if(0===(n=e.getTile(t,o).value)){r=!0;break e}if(r=n===e.getTile(t-1,o).value||n===e.getTile(t+1,o).value||n===e.getTile(t,o-1).value||n===e.getTile(t,o+1).value||r)break e}return r}(t)||r.dispatch({type:w}),f.publish({model:t.getModel(),state:r.getState()})}),100)}};return{left:function(){T(2)},right:function(){T(3)},up:function(){T(0)},down:function(){T(1)},reset:function(){t.reset(),u.clean(),l(0),r.dispatch(q());var e=o.getNextPosition(),n=o.getNextNumber();t.setPosition({pos:e,value:n,level:2===n?1:2}),f.publish({model:t.getModel(),state:r.getState()})},back:function(){var e=u.pop();t.setModel(e.model),e.state.gameover&&r.dispatch(q()),l(e.state.score)},restoreStore:function(e){u.restore(e),u.doOnSizeChange.publish(e.length)},restoreState:function(e){t.setModel(e.model),r.restore(e.state)},getModel:function(){return t.getModel()},start:function(){var e=o.getNextPosition(),n=o.getNextNumber();t.setPosition({pos:e,value:n,level:2===n?1:2}),u.doOnSizeChange.publish(0)},doOnBackSizeChange:u.doOnSizeChange,doOnModelReset:t.doOnModelReset,doOnMoveFinished:a,doOnGameOver:c,doOnGameOverReset:s,doOnStorePush:u.doOnStorePush,doOnAfterNewTile:f,doOnScoreChange:i,doOnWinTileReached:p}},O=function(e){var t=e.size,o=e.cacheSize,n=e.chanceOf2||90,r=e.winTile,i=e.store,p=function(e){var t=h(),o=h();e&&"number"==typeof e||(e=4);var n=function(e){var t,o,n=[];for(t=0;t<e;t++)for(n.push([]),o=0;o<e;o++)n[t].push({value:0,level:0});return n},r=function(e){var t,o,n=[];for(t=0;t<e;t++)for(o=0;o<e;o++)n.push({pos:[t,o],filled:!1});return n},i=n(e),p=r(e),a=function(e){var o=e.pos,n=e.value;null!==o&&(t.publish(e),i[o[0]][o[1]].value=n,i[o[0]][o[1]].level=e.level,p.filter((function(e){return e.pos[0]===o[0]&&e.pos[1]===o[1]}))[0].filled=!!n)},c=function(t){var o,n;for(o=0;o<e;o++)for(n=0;n<e;n++)a({pos:[o,n],value:t[o][n].value,level:t[o][n].level})};return{getModel:function(){return b(i)},getEmptyTiles:function(){return b(p.filter((function(e){return!e.filled})))},setPosition:a,getTile:function(e,t){var o=Array.prototype.slice.apply(arguments,[0]);return"[object Array]"===Object.prototype.toString.apply(o[0])&&(e=o[0][0],t=o[0][1]),i[e]&&i[e][t]},reset:function(){c(n(e)),p=r(e),o.publish()},setModel:c,getSize:function(){return e},doOnPositionChange:t,doOnModelReset:o}}(t),a=function(e,t){if("number"!=typeof e)throw{type:"TypeError",message:"expecting a number"};return e<=1||(e/=100),{getNextNumber:function(){return Math.random()<=e?2:4},getNextPosition:function(){var e,o,n=t.getEmptyTiles().length;return 0===n?null:t.getEmptyTiles()[(e=n-1,o=(""+e).length,Math.floor(Math.random()*Math.pow(10,o))%(e+1))].pos}}}(n,p),c=T({model:p,randomizer:a,cacheSize:o,winTile:r});i&&i.storage?setTimeout((function(){var e=`${t}-gamestate`,o=`${t}-currentstate`,n=localStorage.getItem(e);n&&c.restoreStore(JSON.parse(n));var r=localStorage.getItem(o);r?c.restoreState(JSON.parse(r)):c.start(),c.doOnStorePush.subscribe((function(t){localStorage.setItem(e,JSON.stringify(t))})),c.doOnAfterNewTile.subscribe((function(e){localStorage.setItem(o,JSON.stringify(e))})),c.doOnBackSizeChange.subscribe((function(t){0===t&&localStorage.setItem(e,"")}))}),0):setTimeout((function(){c.start()}),0);var s=b(Object.assign(c,{model:p}));return delete s.start,delete s.restoreStore,delete s.restoreState,s},E=o(368),C=o.n(E),M=o(835),P=o.n(M),N=function(e){var t=document.createElement("div");return t.className=e,t},j=function(e){var t=N("icon");return t.innerHTML=e,t},A=function(){document.body.innerHTML='<div class="heading">2048</div> <div class="action"> <div class="btn-container"> <div class="btn back"> <div class="refresh-count"></div> </div> <div class="btn refresh"></div> </div> <div class="score-container"> <div class="high-score">0</div> <div class="score">0</div> </div> </div> <div class="app"> <div class="game-over">Game Over</div> <div class="tile-container"></div> </div> <div class="credits"> <div>&copy; Ashutosh Padhi</div> <div>UX by Barkha</div> <div class="version"></div> </div> ',Element.prototype.setPositionClass=function(e){var t=this.className;t=t.replace(/\bf[0-9]{1,2}-[0-9]{1,2}/,"").replace(/\s+/," ").trim(),this.className=t+" f"+e.map((function(e){return""+(e+1)})).join("-")},Element.prototype.setNumberClass=function(e){var t=this.className;t=t.replace(/\bt[0-9]+\b/g,"").replace(/\s+/," ").trim(),this.className=t+" t"+e},Element.prototype.removeClass=function(e){var t=this.className;this.className=t.split(/\s/).filter((function(t){return t!==e})).join(" ")},Element.prototype.addClass=function(e){this.className=this.className+" "+e},function(e,t){var o,n,r;for(o=1;o<=8;o++){for(r=N("sqr-row"),n=1;n<=8;n++)r.appendChild(N("sqr sqr"+o+"-"+n));e.appendChild(r)}}(document.querySelector(".app"));var e,t=g(document.querySelector(".action .score")),o=g(document.querySelector(".action .high-score")),n=(e=document.querySelector(".app .game-over"),{set:function(){e.style.display="flex"},release:function(){e.style.display="none"}}),r=g(document.querySelector(".action .refresh-count")),i=O({size:8,cacheSize:5,chanceOf2:90,winTile:2048,store:{storage:localStorage}});!function(e){var t=document.querySelector(".tile-container"),o=[],n={};e.model.doOnPositionChange.subscribe((function(e){var r,i=e.pos,p=e.value,a=e.level,c=e.noview,s=e.posFrom;c||(s&&s.length>0?(r=n[s.toString()])&&(r.setPositionClass(i),r.setNumberClass(a),r.innerText=p,n[i.toString()]=r,r.removeClass("newtile"),delete n[s.toString()]):p?((r=n[i.toString()])||(0===o.length?r=function(){var e=document.createElement("div");return e.className="tile newtile",e}():(r=o.pop()).addClass("newtile"),n[i.toString()]=r,t.appendChild(r)),r.setPositionClass(i),r.setNumberClass(a),r.innerText=p,"double"===e.action&&(r.removeClass("movetile"),r.offsetWidth,r.addClass("movetile"))):(r=n[i.toString()])&&(t.removeChild(r),r.removeClass("newtile"),r.removeClass("movetile"),o.push(r),delete n[i.toString()]))}))}(i);var p=document.querySelector(".action .btn.refresh");p.appendChild(j(C())),p.addEventListener("click",(function(){i.reset()}));var a,c=document.querySelector(".action .btn.back");c.appendChild(j(P())),c.addEventListener("click",(function(){i.back()})),i.doOnBackSizeChange.subscribe((function(e){r.set(e)})),i.doOnGameOver.subscribe((function(){n.set()})),i.doOnGameOverReset.subscribe((function(){n.release()})),i.doOnScoreChange.subscribe((function(e){t.set(e.score),o.set(e.highScore)})),function(e,t,o){var n=null,r=null;if(o=o||0,!e)throw{name:"TypeError",message:"expected a HTMLElement but recieved "+e};if(!t||"function"!=typeof t)throw{name:"TypeError",message:"expected a proper event callback function"};e.addEventListener("touchstart",(function(e){e.touches.length<2&&(n=[e.touches[0].clientX,e.touches[0].clientY]),e.preventDefault()})),e.addEventListener("touchend",(function(e){var i,p;n&&(i=(r=[e.changedTouches[0].clientX,e.changedTouches[0].clientY])[0]-n[0],p=r[1]-n[1],(Math.abs(i)>=o||Math.abs(p)>=o)&&(Math.abs(i)>Math.abs(p)?t(i>0?{event:e,type:"right"}:{event:e,type:"left"}):t(p>0?{event:e,type:"down"}:{event:e,type:"up"}))),n=null,r=null,e.preventDefault()}))}(document.querySelector(".app"),(a=(new Date).getTime(),function(e){var t=(new Date).getTime();if(t>a+100)switch(e.type){case"down":i.down();break;case"right":i.right();break;case"up":i.up();break;case"left":i.left()}a=t}),10),document.body.addEventListener("keydown",function(){var e=(new Date).getTime();return function(t){var o=(new Date).getTime();if(o>e+100)switch(t.keyCode){case 40:i.down();break;case 39:i.right();break;case 38:i.up();break;case 37:i.left()}e=o}}())};window.onload=function(){window.app2048={collision:new Function("return arguments[0]*2")},A(),document.querySelector(".version").innerText="v0.6.1"}})()})();