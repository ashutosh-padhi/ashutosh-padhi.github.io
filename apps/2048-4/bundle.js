(()=>{var e={673:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var o=n(81),r=n.n(o),i=n(645),a=n.n(i)()(r());a.push([e.id,"html,body{height:100%;width:100%;margin:0px;padding:0px}body{display:flex;flex-direction:column;align-items:center;justify-content:center;background-color:#eff;font-family:Verdana,sans-serif;color:#000}.action{display:flex;width:450px;justify-content:space-between;align-content:center}.action .btn-container{display:flex;align-items:center}.action .btn-container .refresh-count{position:absolute;text-align:center;line-height:20px;top:-9px;left:-9px;font-size:18px;height:20px;width:20px;border-radius:50%;background-color:#fff;box-shadow:0px 0px 2px rgba(0,0,0,.5);color:#000}.action .btn-container .btn{display:flex;justify-content:center;align-items:center;border-radius:5px;padding:3px;height:26px;width:26px;box-shadow:0px 0px 2px rgba(0,0,0,.5);margin-left:10px;cursor:pointer;transform:scale(1);transition:transform .1s}.action .btn-container .btn:hover{transform:scale(1.2)}.action .btn-container .btn .icon{height:20px;width:20px}.action .btn-container .btn .icon svg{height:100%;width:100%}.action .btn-container .btn.refresh svg{fill:red}.action .btn-container .btn.back{position:relative}.action .btn-container .btn.back svg{fill:green}.action .score-container{display:flex;align-items:flex-end;flex-direction:column}.action .score-container .score{font-size:26px;display:flex;align-items:center;flex-direction:row-reverse}@keyframes newtile{0%{transform:scale(0.5)}100%{transform:scale(1)}}@keyframes movetile{0%{transform:scale(1)}40%{transform:scale(1.2)}100%{transform:scale(1)}}.movetile{animation-name:movetile;animation-duration:.3s;animation-delay:.2s}.newtile{animation-name:newtile;animation-duration:.15s}.app{box-shadow:0px 0px 10px 2px rgba(0,0,0,.5);border-radius:5px;min-height:450px;min-width:450px;position:relative;background-color:#e7e7e7}.app .game-over{height:450px;width:450px;position:absolute;top:0px;left:0px;display:none;align-items:center;justify-content:center;font-size:40px;background-color:rgba(255,255,255,.6);border-radius:5px;z-index:10}.app .sqr-row{display:flex}.app .sqr-row:last-child{margin-bottom:10px}.app .sqr-row .sqr{box-sizing:border-box;height:100px;width:100px;background-color:#fff;background-repeat:no-repeat;border-radius:5px;margin-left:10px;margin-top:10px;box-shadow:0px 0px 2px rgba(0,0,0,.5)}.app .sqr-row .sqr:last-child{margin-right:10px}.app .sqr1-1{background-position:0px 0px}.app .sqr1-2{background-position:-110px 0px}.app .sqr1-3{background-position:-220px 0px}.app .sqr1-4{background-position:-330px 0px}.app .sqr2-1{background-position:0px -110px}.app .sqr2-2{background-position:-110px -110px}.app .sqr2-3{background-position:-220px -110px}.app .sqr2-4{background-position:-330px -110px}.app .sqr3-1{background-position:0px -220px}.app .sqr3-2{background-position:-110px -220px}.app .sqr3-3{background-position:-220px -220px}.app .sqr3-4{background-position:-330px -220px}.app .sqr4-1{background-position:0px -330px}.app .sqr4-2{background-position:-110px -330px}.app .sqr4-3{background-position:-220px -330px}.app .sqr4-4{background-position:-330px -330px}.app .tile-container{position:absolute;top:0px;left:0px}.app .tile-container .tile{height:100px;width:100px;border-radius:5px;position:absolute;display:flex;justify-content:center;align-items:center;transition:top 0.1s,left 0.1s}.app .tile-container .f1-1{top:10px;left:10px}.app .tile-container .f1-2{top:10px;left:120px}.app .tile-container .f1-3{top:10px;left:230px}.app .tile-container .f1-4{top:10px;left:340px}.app .tile-container .f2-1{top:120px;left:10px}.app .tile-container .f2-2{top:120px;left:120px}.app .tile-container .f2-3{top:120px;left:230px}.app .tile-container .f2-4{top:120px;left:340px}.app .tile-container .f3-1{top:230px;left:10px}.app .tile-container .f3-2{top:230px;left:120px}.app .tile-container .f3-3{top:230px;left:230px}.app .tile-container .f3-4{top:230px;left:340px}.app .tile-container .f4-1{top:340px;left:10px}.app .tile-container .f4-2{top:340px;left:120px}.app .tile-container .f4-3{top:340px;left:230px}.app .tile-container .f4-4{top:340px;left:340px}.t0{background-color:#deece8;color:#000;font-size:40px}.t1{background-color:#eadcd3;color:#000;font-size:40px}.t2{background-color:#6ee5e7;color:#000;font-size:40px}.t3{background-color:#fbe0d4;color:#000;font-size:40px}.t4{background-color:#f7b2b0;color:#000;font-size:36px}.t5{background-color:#e3d5e3;color:#000;font-size:36px}.t6{background-color:#fdb0aa;color:#000;font-size:36px}.t7{background-color:#fefecc;color:#000;font-size:32px}.t8{background-color:#f2e7bf;color:#000;font-size:32px}.t9{background-color:#cadb8f;color:#000;font-size:32px}.t10{background-color:#a2bc2a;color:#000;font-size:28px}.t11{background-color:#dce49f;color:#000;font-size:28px}.t12{background-color:#51c29f;color:#000;font-size:28px}.t13{background-color:#c5cf7f;color:#000;font-size:28px}.t14{background-color:#fecc00;color:#000;font-size:24px}.t15{background-color:#ffce00;color:#000;font-size:24px}.t16{background-color:#28734a;color:#fff;font-size:24px}.credits{margin-top:10px;font-size:14px;text-align:center}.heading{font-size:50px}",""]);const s=a},645:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",o=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),o&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),o&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,o,r,i){"string"==typeof e&&(e=[[null,e,void 0]]);var a={};if(o)for(var s=0;s<this.length;s++){var c=this[s][0];null!=c&&(a[c]=!0)}for(var p=0;p<e.length;p++){var l=[].concat(e[p]);o&&a[l[0]]||(void 0!==i&&(void 0===l[5]||(l[1]="@layer".concat(l[5].length>0?" ".concat(l[5]):""," {").concat(l[1],"}")),l[5]=i),n&&(l[2]?(l[1]="@media ".concat(l[2]," {").concat(l[1],"}"),l[2]=n):l[2]=n),r&&(l[4]?(l[1]="@supports (".concat(l[4],") {").concat(l[1],"}"),l[4]=r):l[4]="".concat(r)),t.push(l))}},t}},81:e=>{"use strict";e.exports=function(e){return e[1]}},379:e=>{"use strict";var t=[];function n(e){for(var n=-1,o=0;o<t.length;o++)if(t[o].identifier===e){n=o;break}return n}function o(e,o){for(var i={},a=[],s=0;s<e.length;s++){var c=e[s],p=o.base?c[0]+o.base:c[0],l=i[p]||0,u="".concat(p," ").concat(l);i[p]=l+1;var f=n(u),d={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==f)t[f].references++,t[f].updater(d);else{var g=r(d,o);o.byIndex=s,t.splice(s,0,{identifier:u,updater:g,references:1})}a.push(u)}return a}function r(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,r){var i=o(e=e||[],r=r||{});return function(e){e=e||[];for(var a=0;a<i.length;a++){var s=n(i[a]);t[s].references--}for(var c=o(e,r),p=0;p<i.length;p++){var l=n(i[p]);0===t[l].references&&(t[l].updater(),t.splice(l,1))}i=c}}},569:e=>{"use strict";var t={};e.exports=function(e,n){var o=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(n)}},216:e=>{"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},565:(e,t,n)=>{"use strict";e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},795:e=>{"use strict";e.exports=function(e){var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var o="";n.supports&&(o+="@supports (".concat(n.supports,") {")),n.media&&(o+="@media ".concat(n.media," {"));var r=void 0!==n.layer;r&&(o+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),o+=n.css,r&&(o+="}"),n.media&&(o+="}"),n.supports&&(o+="}");var i=n.sourceMap;i&&"undefined"!=typeof btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),t.styleTagTransform(o,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},589:e=>{"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},368:e=>{e.exports='<svg version="1.1" viewBox="0 0 33.867 33.867" xmlns="http://www.w3.org/2000/svg"><g transform="translate(0 -263.13)"><rect x="1.8521" y="264.99" width="30.162" height="30.162" rx="7.9375" ry="7.9375"></rect></g></svg>'},835:e=>{e.exports='<svg version="1.1" viewBox="0 0 33.867 33.867" xmlns="http://www.w3.org/2000/svg"><g transform="translate(0 -263.13)"><path transform="rotate(126.88 20.11 280.87)" d="m30.034 295.44c-2.4736 1.8552-28.064-9.0761-28.434-12.146s21.892-19.766 24.736-18.552 6.1721 28.843 3.6985 30.698z"></path></g></svg>'}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var i=t[o]={id:o,exports:{}};return e[o](i,i.exports,n),i.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.nc=void 0,(()=>{"use strict";var e=n(379),t=n.n(e),o=n(795),r=n.n(o),i=n(569),a=n.n(i),s=n(565),c=n.n(s),p=n(216),l=n.n(p),u=n(589),f=n.n(u),d=n(673),g={};g.styleTagTransform=f(),g.setAttributes=c(),g.insert=a().bind(null,"head"),g.domAPI=r(),g.insertStyleElement=l(),t()(d.Z,g),d.Z&&d.Z.locals&&d.Z.locals;var v=function(e){return{set:function(t){e.innerText=t}}},h=function(e,t){if("object"!=typeof e)throw{type:"TypeError",message:"expecting source to be a object"};if(t&&"object"!=typeof e)throw{type:"TypeError",message:"expecting destination to be a object"};for(var n in t||(t="[object Array]"===Object.prototype.toString.apply(e)?[]:{}),e)Object.prototype.hasOwnProperty.apply(e,[n])&&("object"!=typeof e[n]?t[n]=e[n]:t[n]=h(e[n]));return t},b=function(e){if("function"!=typeof e)throw{name:"TypeError",message:"expecting a function as first argument"};var t=Array.prototype.slice.apply(arguments,[1]);return function(){var n=Array.prototype.slice.apply(arguments);return e.apply(null,t.concat(n))}},m=function(){var e=[];return{publish:function(){var t;for(t=0;t<e.length;t++)"function"==typeof e[t]&&e[t].apply(null,arguments)},subscribe:function(t){return"function"==typeof t&&e.push(t),{unsubscribe:function(){var n=e.indexOf(t);e.splice(n,1)}}}}},x=function(e,t,n){var o=function(o,r,i,a){var s;switch(r.action){case n.actions.DEL:t.setPosition({pos:[i,a],value:0,level:0});break;case n.actions.MOVE:o&&o(i,a,r),t.setPosition({pos:[i,a],value:0,noview:!0,level:0});break;case n.actions.DOUBLE:var c=t.getTile(i,a);s=window.app2048.collision(c.value),t.setPosition({pos:[i,a],value:s,level:c.level+1,action:"double"}),"function"==typeof e&&e(s)}},r=function(e,n,o){t.getTile(e,n).value&&t.setPosition({pos:[e-o.distance,n],value:t.getTile(e,n).value,level:t.getTile(e,n).level,noview:!1,posFrom:[e,n]})},i=function(e,n,o){t.getTile(e,n).value&&t.setPosition({pos:[e+o.distance,n],value:t.getTile(e,n).value,level:t.getTile(e,n).level,noview:!1,posFrom:[e,n]})},a=function(e,n,o){t.getTile(e,n).value&&t.setPosition({pos:[e,n-o.distance],value:t.getTile(e,n).value,level:t.getTile(e,n).level,noview:!1,posFrom:[e,n]})},s=function(e,n,o){t.getTile(e,n).value&&t.setPosition({pos:[e,n+o.distance],value:t.getTile(e,n).value,level:t.getTile(e,n).level,noview:!1,posFrom:[e,n]})},c=function(e,t,r){return function(e,t,o){var r=!0,i=n.getActions(e,t).sort((function(e,t){return e.action-t.action}));return 0===n.getActions(e,t).filter((function(e){return e.action===n.actions.MOVE})).length&&(r=!1),i&&i.length>0&&i.forEach((function(n){o&&o(n,e,t)})),{movement:r}}(e,t,b(o,r))};return{up:function(e,t){return c(e,t,r)},down:function(e,t){return c(e,t,i)},left:function(e,t){return c(e,t,a)},right:function(e,t){return c(e,t,s)}}},y="set-score",w="add-score",S="set-game-over",k="unset-game-over",T=function(){return{type:k}},O=function(e,t){switch(t.type){case y:return Object.assign(e,{score:t.payload.score});case w:var n=e.score+t.payload.score;return n>e.highScore&&(e.highScore=n),Object.assign(e,{score:n});case"set-game-won":return Object.assign(e,{won:!0});case"unset-game-won":return Object.assign(e,{won:!1});case S:return Object.assign(e,{gameover:!0});case k:return Object.assign(e,{gameover:!1})}},z=function(e){var t=e.model,n=e.randomizer,o=e.winTile||2048,r=function(e,t){if(!t)throw{name:"TypeError",message:"reducer is not passed to the store"};if("function"!=typeof t)throw{name:"TypeError",message:"reducer should be a function"};e=e||{};var n=m(),o=function(){return h(e)},r=function(t){if("[object Array]"!==Object.prototype.toString.apply(t))throw{name:"TypeError",message:"expecting an array"};var n;try{n=t.reduce((function(e,t){return e[t]}),e)}catch(e){throw{name:"PathError",message:"property doesn't exist on the store"}}return"object"==typeof n?h(n):n};return{dispatch:function(i){e=t(e,i),n.publish(i,{getState:o,getFromPath:r})},doOnStateChange:n,getFromPath:r,getState:o,restore:function(t){t&&"object"==typeof t&&(e=Object.assign(e,t),n.publish({restore:!0},{getState:o,getFromPath:r}))}}}({highScore:0,score:0},O),i=m(),a=m(),s=m(),c=m(),p=m(),l=m(),u=function(e){r.dispatch(function(e){return{type:y,payload:{score:e}}}(e))};r.doOnStateChange.subscribe((function(e,t){if(e.restore)return(t=t.getState()).gameover&&c.publish(),t.won&&a.publish(),void i.publish({score:t.score,highScore:t.highScore||0});switch(e.type){case y:i.publish({score:t.getFromPath(["score"]),highScore:t.getFromPath(["highScore"])});break;case w:n=t.getFromPath(["score"]),r=t.getFromPath(["highScore"]),n===o&&a.publish(n),i.publish({score:n,highScore:r});break;case S:c.publish();break;case k:p.publish()}var n,r})),u(0);var f=function(e){var t=[],n=m(),o=m(),r=function(){return t.length};return{push:function(i){t.length<e?(t.push(i),n.publish(r())):(t.shift(),t.push(i)),o.publish(h(t))},maxSize:function(){return e},size:r,pop:function(){var e=t.pop();return e&&n.publish(r()),e||null},clean:function(){t=[],n.publish(0)},restore:function(e){t=e},doOnSizeChange:n,doOnStorePush:o}}(e.cacheSize||5),d=t.getSize(),g=function(e){var t={DOUBLE:0,MOVE:1,DEL:2};"number"!=typeof e&&(e=4);var n=function(){var t,n,o=[];for(t=0;t<e;t++)for(o.push([]),n=0;n<e;n++)o[t].push([]);return o},o=n();return{getMatrix:function(){return h(o)},get actions(){return t},addAction:function(e,n,r){e.action!==t.DEL&&o[n][r]?o[n][r].push(e):o[n][r]=[e]},reset:function(){o=n()},getActions:function(e,t){return o[e]&&o[e][t]}}}(d),v=b(x,(function(e){!function(e){r.dispatch(function(e){return{type:w,payload:{score:e}}}(e))}(e)})),z=function(e){var o={model:t.getModel(),state:r.getState()};if(function(e){var n,o,r=function(e,t){var n=0,o=0,r=[];return{decide:function(i,a){0===e.getTile(i,a).value?o++:e.getTile(i,a).value===n?(t.addAction({action:t.actions.DEL},r[0],r[1]),o++,t.addAction({action:t.actions.DOUBLE},i,a),t.addAction({action:t.actions.MOVE,distance:o},i,a),n=0):(n=e.getTile(i,a).value,0!==o&&t.addAction({action:t.actions.MOVE,distance:o},i,a),r=[i,a])},reset:function(){r=[],o=0,n=0}}}(t,g);switch(e){case 0:for(o=0;o<d;o++){for(n=0;n<d;n++)r.decide(n,o);r.reset()}break;case 1:for(o=0;o<d;o++){for(n=d-1;n>=0;n--)r.decide(n,o);r.reset()}break;case 2:for(n=0;n<d;n++){for(o=0;o<d;o++)r.decide(n,o);r.reset()}break;case 3:for(n=0;n<d;n++){for(o=d-1;o>=0;o--)r.decide(n,o);r.reset()}}}(e),function(e){var n,o,r=v(t,g),i=!1;switch(e){case 0:for(o=0;o<d;o++)for(n=0;n<d;n++)i=r.up(n,o).movement||i;break;case 1:for(o=0;o<d;o++)for(n=d-1;n>=0;n--)i=r.down(n,o).movement||i;break;case 2:for(n=0;n<d;n++)for(o=0;o<d;o++)i=r.left(n,o).movement||i;break;case 3:for(n=0;n<d;n++)for(o=d-1;o>=0;o--)i=r.right(n,o).movement||i}return g.reset(),{movement:i}}(e).movement){f.push(o),s.publish(o.model);var i=n.getNextPosition(),a=n.getNextNumber();setTimeout((function(){t.setPosition({pos:i,value:a,level:2===a?1:2}),function(e){var t,n,o,r=!1;e:for(t=0;t<d;t++)for(n=0;n<d;n++){if(0===(o=e.getTile(t,n).value)){r=!0;break e}if(r=o===e.getTile(t-1,n).value||o===e.getTile(t+1,n).value||o===e.getTile(t,n-1).value||o===e.getTile(t,n+1).value||r)break e}return r}(t)||r.dispatch({type:S}),l.publish({model:t.getModel(),state:r.getState()})}),100)}};return{left:function(){z(2)},right:function(){z(3)},up:function(){z(0)},down:function(){z(1)},reset:function(){t.reset(),f.clean(),u(0),r.dispatch(T());var e=n.getNextPosition(),o=n.getNextNumber();t.setPosition({pos:e,value:o,level:2===o?1:2}),l.publish({model:t.getModel(),state:r.getState()})},back:function(){var e=f.pop();t.setModel(e.model),e.state.gameover&&r.dispatch(T()),u(e.state.score)},restoreStore:function(e){f.restore(e),f.doOnSizeChange.publish(e.length)},restoreState:function(e){t.setModel(e.model),r.restore(e.state)},getModel:function(){return t.getModel()},start:function(){var e=n.getNextPosition(),o=n.getNextNumber();t.setPosition({pos:e,value:o,level:2===o?1:2}),f.doOnSizeChange.publish(0)},doOnBackSizeChange:f.doOnSizeChange,doOnModelReset:t.doOnModelReset,doOnMoveFinished:s,doOnGameOver:c,doOnGameOverReset:p,doOnStorePush:f.doOnStorePush,doOnAfterNewTile:l,doOnScoreChange:i,doOnWinTileReached:a}},E=function(e){var t=e.size,n=e.cacheSize,o=e.chanceOf2||90,r=e.winTile,i=e.store,a=function(e){var t=m(),n=m();e&&"number"==typeof e||(e=4);var o=function(e){var t,n,o=[];for(t=0;t<e;t++)for(o.push([]),n=0;n<e;n++)o[t].push({value:0,level:0});return o},r=function(e){var t,n,o=[];for(t=0;t<e;t++)for(n=0;n<e;n++)o.push({pos:[t,n],filled:!1});return o},i=o(e),a=r(e),s=function(e){var n=e.pos,o=e.value;null!==n&&(t.publish(e),i[n[0]][n[1]].value=o,i[n[0]][n[1]].level=e.level,a.filter((function(e){return e.pos[0]===n[0]&&e.pos[1]===n[1]}))[0].filled=!!o)},c=function(t){var n,o;for(n=0;n<e;n++)for(o=0;o<e;o++)s({pos:[n,o],value:t[n][o].value,level:t[n][o].level})};return{getModel:function(){return h(i)},getEmptyTiles:function(){return h(a.filter((function(e){return!e.filled})))},setPosition:s,getTile:function(e,t){var n=Array.prototype.slice.apply(arguments,[0]);return"[object Array]"===Object.prototype.toString.apply(n[0])&&(e=n[0][0],t=n[0][1]),i[e]&&i[e][t]},reset:function(){c(o(e)),a=r(e),n.publish()},setModel:c,getSize:function(){return e},doOnPositionChange:t,doOnModelReset:n}}(t),s=function(e,t){if("number"!=typeof e)throw{type:"TypeError",message:"expecting a number"};return e<=1||(e/=100),{getNextNumber:function(){return Math.random()<=e?2:4},getNextPosition:function(){var e,n,o=t.getEmptyTiles().length;return 0===o?null:t.getEmptyTiles()[(e=o-1,n=(""+e).length,Math.floor(Math.random()*Math.pow(10,n))%(e+1))].pos}}}(o,a),c=z({model:a,randomizer:s,cacheSize:n,winTile:r});i&&i.storage?setTimeout((function(){var e=`${t}-gamestate`,n=`${t}-currentstate`,o=localStorage.getItem(e);o&&c.restoreStore(JSON.parse(o));var r=localStorage.getItem(n);r?c.restoreState(JSON.parse(r)):c.start(),c.doOnStorePush.subscribe((function(t){localStorage.setItem(e,JSON.stringify(t))})),c.doOnAfterNewTile.subscribe((function(e){localStorage.setItem(n,JSON.stringify(e))})),c.doOnBackSizeChange.subscribe((function(t){0===t&&localStorage.setItem(e,"")}))}),0):setTimeout((function(){c.start()}),0);var p=h(Object.assign(c,{model:a}));return delete p.start,delete p.restoreStore,delete p.restoreState,p},C=n(368),M=n.n(C),P=n(835),q=n.n(P),N=function(e){var t=document.createElement("div");return t.className=e,t},j=function(e){var t=N("icon");return t.innerHTML=e,t},A=function(){document.body.innerHTML='<div class="heading">2048</div> <div class="action"> <div class="btn-container"> <div class="btn back"> <div class="refresh-count"></div> </div> <div class="btn refresh"></div> </div> <div class="score-container"> <div class="high-score">0</div> <div class="score">0</div> </div> </div> <div class="app"> <div class="game-over">Game Over</div> <div class="tile-container"></div> </div> <div class="credits"> <div>&copy; Ashutosh Padhi</div> <div>UX by Barkha</div> <div class="version"></div> </div> ',Element.prototype.setPositionClass=function(e){var t=this.className;t=t.replace(/\bf[0-9]{1,2}-[0-9]{1,2}/,"").replace(/\s+/," ").trim(),this.className=t+" f"+e.map((function(e){return""+(e+1)})).join("-")},Element.prototype.setNumberClass=function(e){var t=this.className;t=t.replace(/\bt[0-9]+\b/g,"").replace(/\s+/," ").trim(),this.className=t+" t"+e},Element.prototype.removeClass=function(e){var t=this.className;this.className=t.split(/\s/).filter((function(t){return t!==e})).join(" ")},Element.prototype.addClass=function(e){this.className=this.className+" "+e},function(e,t){var n,o,r;for(n=1;n<=4;n++){for(r=N("sqr-row"),o=1;o<=4;o++)r.appendChild(N("sqr sqr"+n+"-"+o));e.appendChild(r)}}(document.querySelector(".app"));var e,t=v(document.querySelector(".action .score")),n=v(document.querySelector(".action .high-score")),o=(e=document.querySelector(".app .game-over"),{set:function(){e.style.display="flex"},release:function(){e.style.display="none"}}),r=v(document.querySelector(".action .refresh-count")),i=E({size:4,cacheSize:5,chanceOf2:90,winTile:2048,store:{storage:localStorage}});!function(e){var t=document.querySelector(".tile-container"),n=[],o={};e.model.doOnPositionChange.subscribe((function(e){var r,i=e.pos,a=e.value,s=e.level,c=e.noview,p=e.posFrom;c||(p&&p.length>0?(r=o[p.toString()])&&(r.setPositionClass(i),r.setNumberClass(s),r.innerText=a,o[i.toString()]=r,r.removeClass("newtile"),delete o[p.toString()]):a?((r=o[i.toString()])||(0===n.length?r=function(){var e=document.createElement("div");return e.className="tile newtile",e}():(r=n.pop()).addClass("newtile"),o[i.toString()]=r,t.appendChild(r)),r.setPositionClass(i),r.setNumberClass(s),r.innerText=a,"double"===e.action&&(r.removeClass("movetile"),r.offsetWidth,r.addClass("movetile"))):(r=o[i.toString()])&&(t.removeChild(r),r.removeClass("newtile"),r.removeClass("movetile"),n.push(r),delete o[i.toString()]))}))}(i);var a=document.querySelector(".action .btn.refresh");a.appendChild(j(M())),a.addEventListener("click",(function(){i.reset()}));var s,c=document.querySelector(".action .btn.back");c.appendChild(j(q())),c.addEventListener("click",(function(){i.back()})),i.doOnBackSizeChange.subscribe((function(e){r.set(e)})),i.doOnGameOver.subscribe((function(){o.set()})),i.doOnGameOverReset.subscribe((function(){o.release()})),i.doOnScoreChange.subscribe((function(e){t.set(e.score),n.set(e.highScore)})),function(e,t,n){var o=null,r=null;if(n=n||0,!e)throw{name:"TypeError",message:"expected a HTMLElement but recieved "+e};if(!t||"function"!=typeof t)throw{name:"TypeError",message:"expected a proper event callback function"};e.addEventListener("touchstart",(function(e){e.touches.length<2&&(o=[e.touches[0].clientX,e.touches[0].clientY]),e.preventDefault()})),e.addEventListener("touchend",(function(e){var i,a;o&&(i=(r=[e.changedTouches[0].clientX,e.changedTouches[0].clientY])[0]-o[0],a=r[1]-o[1],(Math.abs(i)>=n||Math.abs(a)>=n)&&(Math.abs(i)>Math.abs(a)?t(i>0?{event:e,type:"right"}:{event:e,type:"left"}):t(a>0?{event:e,type:"down"}:{event:e,type:"up"}))),o=null,r=null,e.preventDefault()}))}(document.querySelector(".app"),(s=(new Date).getTime(),function(e){var t=(new Date).getTime();if(t>s+100)switch(e.type){case"down":i.down();break;case"right":i.right();break;case"up":i.up();break;case"left":i.left()}s=t}),10),document.body.addEventListener("keydown",function(){var e=(new Date).getTime();return function(t){var n=(new Date).getTime();if(n>e+100)switch(t.keyCode){case 40:i.down();break;case 39:i.right();break;case 38:i.up();break;case 37:i.left()}e=n}}())};window.onload=function(){window.app2048={collision:new Function("return arguments[0]*2")},A(),document.querySelector(".version").innerText="v0.6.1"}})()})();