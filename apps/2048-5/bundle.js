(()=>{var e={673:(e,t,o)=>{"use strict";o.d(t,{Z:()=>s});var n=o(81),r=o.n(n),i=o(645),a=o.n(i)()(r());a.push([e.id,"html,body{height:100%;width:100%;margin:0px;padding:0px}body{display:flex;flex-direction:column;align-items:center;justify-content:center;background-color:#fff;font-family:Verdana,sans-serif;color:#000}.action{display:flex;width:442px;justify-content:space-between;align-content:center}.action .btn-container{display:flex;align-items:center}.action .btn-container .refresh-count{position:absolute;text-align:center;line-height:20px;top:-9px;left:-9px;font-size:18px;height:20px;width:20px;border-radius:50%;background-color:#fff;box-shadow:0px 0px 2px rgba(0,0,0,.5);color:#000}.action .btn-container .btn{display:flex;justify-content:center;align-items:center;border-radius:5px;padding:3px;height:26px;width:26px;box-shadow:0px 0px 2px rgba(0,0,0,.5);margin-left:10px;cursor:pointer;transform:scale(1);transition:transform .1s}.action .btn-container .btn:hover{transform:scale(1.2)}.action .btn-container .btn .icon{height:20px;width:20px}.action .btn-container .btn .icon svg{height:100%;width:100%}.action .btn-container .btn.refresh svg{fill:red}.action .btn-container .btn.back{position:relative}.action .btn-container .btn.back svg{fill:green}.action .score-container{display:flex;align-items:flex-end;flex-direction:column}.action .score-container .score{font-size:26px;display:flex;align-items:center;flex-direction:row-reverse}@keyframes newtile{0%{transform:scale(0.5)}100%{transform:scale(1)}}@keyframes movetile{0%{transform:scale(1)}40%{transform:scale(1.2)}100%{transform:scale(1)}}.movetile{animation-name:movetile;animation-duration:.3s;animation-delay:.2s}.newtile{animation-name:newtile;animation-duration:.15s}.app{box-shadow:0px 0px 5px rgba(0,0,0,.5);border-radius:5px;min-height:442px;min-width:442px;position:relative;background-color:#aaa}.app .game-over{height:442px;width:442px;position:absolute;top:0px;left:0px;display:none;align-items:center;justify-content:center;font-size:40px;background-color:rgba(255,255,255,.6);border-radius:5px;z-index:10}.app .sqr-row{display:flex}.app .sqr-row:last-child{margin-bottom:7px}.app .sqr-row .sqr{box-sizing:border-box;height:80px;width:80px;background-color:#ddd;background-repeat:no-repeat;border-radius:5px;margin-left:7px;margin-top:7px;box-shadow:0px 0px 2px rgba(0,0,0,.5)}.app .sqr-row .sqr:last-child{margin-right:7px}.app .sqr1-1{background-position:0px 0px}.app .sqr1-2{background-position:-87px 0px}.app .sqr1-3{background-position:-174px 0px}.app .sqr1-4{background-position:-261px 0px}.app .sqr1-5{background-position:-348px 0px}.app .sqr2-1{background-position:0px -87px}.app .sqr2-2{background-position:-87px -87px}.app .sqr2-3{background-position:-174px -87px}.app .sqr2-4{background-position:-261px -87px}.app .sqr2-5{background-position:-348px -87px}.app .sqr3-1{background-position:0px -174px}.app .sqr3-2{background-position:-87px -174px}.app .sqr3-3{background-position:-174px -174px}.app .sqr3-4{background-position:-261px -174px}.app .sqr3-5{background-position:-348px -174px}.app .sqr4-1{background-position:0px -261px}.app .sqr4-2{background-position:-87px -261px}.app .sqr4-3{background-position:-174px -261px}.app .sqr4-4{background-position:-261px -261px}.app .sqr4-5{background-position:-348px -261px}.app .sqr5-1{background-position:0px -348px}.app .sqr5-2{background-position:-87px -348px}.app .sqr5-3{background-position:-174px -348px}.app .sqr5-4{background-position:-261px -348px}.app .sqr5-5{background-position:-348px -348px}.app .tile-container{position:absolute;top:0px;left:0px}.app .tile-container .tile{height:80px;width:80px;border-radius:5px;position:absolute;display:flex;justify-content:center;align-items:center;transition:top 0.1s,left 0.1s}.app .tile-container .f1-1{top:7px;left:7px}.app .tile-container .f1-2{top:7px;left:94px}.app .tile-container .f1-3{top:7px;left:181px}.app .tile-container .f1-4{top:7px;left:268px}.app .tile-container .f1-5{top:7px;left:355px}.app .tile-container .f2-1{top:94px;left:7px}.app .tile-container .f2-2{top:94px;left:94px}.app .tile-container .f2-3{top:94px;left:181px}.app .tile-container .f2-4{top:94px;left:268px}.app .tile-container .f2-5{top:94px;left:355px}.app .tile-container .f3-1{top:181px;left:7px}.app .tile-container .f3-2{top:181px;left:94px}.app .tile-container .f3-3{top:181px;left:181px}.app .tile-container .f3-4{top:181px;left:268px}.app .tile-container .f3-5{top:181px;left:355px}.app .tile-container .f4-1{top:268px;left:7px}.app .tile-container .f4-2{top:268px;left:94px}.app .tile-container .f4-3{top:268px;left:181px}.app .tile-container .f4-4{top:268px;left:268px}.app .tile-container .f4-5{top:268px;left:355px}.app .tile-container .f5-1{top:355px;left:7px}.app .tile-container .f5-2{top:355px;left:94px}.app .tile-container .f5-3{top:355px;left:181px}.app .tile-container .f5-4{top:355px;left:268px}.app .tile-container .f5-5{top:355px;left:355px}.t0{background-color:#ffe6b3;color:#000;font-size:40px}.t1{background-color:#ffdc98;color:#000;font-size:40px}.t2{background-color:#ffd57f;color:#000;font-size:40px}.t3{background-color:#fc6;color:#000;font-size:40px}.t4{background-color:#ff894c;color:#000;font-size:36px}.t5{background-color:#fe0000;color:#fff;font-size:36px}.t6{background-color:#ff3334;color:#fff;font-size:36px}.t7{background-color:#ff4d4d;color:#fff;font-size:32px}.t8{background-color:#ff6766;color:#fff;font-size:32px}.t9{background-color:#ff999a;color:#000;font-size:32px}.t10{background-color:#87ff4d;color:#000;font-size:28px}.t11{background-color:#62ff1a;color:#000;font-size:28px}.t12{background-color:#51ff00;color:#000;font-size:28px}.t13{background-color:#00ff01;color:#fff;font-size:28px}.t14{background-color:#00ffab;color:#000;font-size:24px}.t15{background-color:#66cbff;color:#000;font-size:24px}.t16{background-color:#1865ff;color:#fff;font-size:24px}.t17{background-color:#1865ff;color:#fff;font-size:20px}.t18{background-color:#1865ff;color:#fff;font-size:20px}.t19{background-color:#1865ff;color:#fff;font-size:20px}.t20{background-color:#1865ff;color:#fff;font-size:16px}.t21{background-color:#1865ff;color:#fff;font-size:16px}.t22{background-color:#1865ff;color:#fff;font-size:16px}.t23{background-color:#1865ff;color:#fff;font-size:16px}.t24{background-color:#1865ff;color:#fff;font-size:12px}.t25{background-color:#1865ff;color:#fff;font-size:12px}.credits{margin-top:10px;font-size:14px;text-align:center}.heading{font-size:50px}",""]);const s=a},645:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var o="",n=void 0!==t[5];return t[4]&&(o+="@supports (".concat(t[4],") {")),t[2]&&(o+="@media ".concat(t[2]," {")),n&&(o+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),o+=e(t),n&&(o+="}"),t[2]&&(o+="}"),t[4]&&(o+="}"),o})).join("")},t.i=function(e,o,n,r,i){"string"==typeof e&&(e=[[null,e,void 0]]);var a={};if(n)for(var s=0;s<this.length;s++){var c=this[s][0];null!=c&&(a[c]=!0)}for(var p=0;p<e.length;p++){var l=[].concat(e[p]);n&&a[l[0]]||(void 0!==i&&(void 0===l[5]||(l[1]="@layer".concat(l[5].length>0?" ".concat(l[5]):""," {").concat(l[1],"}")),l[5]=i),o&&(l[2]?(l[1]="@media ".concat(l[2]," {").concat(l[1],"}"),l[2]=o):l[2]=o),r&&(l[4]?(l[1]="@supports (".concat(l[4],") {").concat(l[1],"}"),l[4]=r):l[4]="".concat(r)),t.push(l))}},t}},81:e=>{"use strict";e.exports=function(e){return e[1]}},379:e=>{"use strict";var t=[];function o(e){for(var o=-1,n=0;n<t.length;n++)if(t[n].identifier===e){o=n;break}return o}function n(e,n){for(var i={},a=[],s=0;s<e.length;s++){var c=e[s],p=n.base?c[0]+n.base:c[0],l=i[p]||0,u="".concat(p," ").concat(l);i[p]=l+1;var f=o(u),d={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==f)t[f].references++,t[f].updater(d);else{var g=r(d,n);n.byIndex=s,t.splice(s,0,{identifier:u,updater:g,references:1})}a.push(u)}return a}function r(e,t){var o=t.domAPI(t);return o.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;o.update(e=t)}else o.remove()}}e.exports=function(e,r){var i=n(e=e||[],r=r||{});return function(e){e=e||[];for(var a=0;a<i.length;a++){var s=o(i[a]);t[s].references--}for(var c=n(e,r),p=0;p<i.length;p++){var l=o(i[p]);0===t[l].references&&(t[l].updater(),t.splice(l,1))}i=c}}},569:e=>{"use strict";var t={};e.exports=function(e,o){var n=function(e){if(void 0===t[e]){var o=document.querySelector(e);if(window.HTMLIFrameElement&&o instanceof window.HTMLIFrameElement)try{o=o.contentDocument.head}catch(e){o=null}t[e]=o}return t[e]}(e);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");n.appendChild(o)}},216:e=>{"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},565:(e,t,o)=>{"use strict";e.exports=function(e){var t=o.nc;t&&e.setAttribute("nonce",t)}},795:e=>{"use strict";e.exports=function(e){var t=e.insertStyleElement(e);return{update:function(o){!function(e,t,o){var n="";o.supports&&(n+="@supports (".concat(o.supports,") {")),o.media&&(n+="@media ".concat(o.media," {"));var r=void 0!==o.layer;r&&(n+="@layer".concat(o.layer.length>0?" ".concat(o.layer):""," {")),n+=o.css,r&&(n+="}"),o.media&&(n+="}"),o.supports&&(n+="}");var i=o.sourceMap;i&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),t.styleTagTransform(n,e,t.options)}(t,e,o)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},589:e=>{"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},368:e=>{e.exports='<svg version="1.1" viewBox="0 0 33.867 33.867" xmlns="http://www.w3.org/2000/svg"><g transform="translate(0 -263.13)"><rect x="1.8521" y="264.99" width="30.162" height="30.162" rx="7.9375" ry="7.9375"></rect></g></svg>'},835:e=>{e.exports='<svg version="1.1" viewBox="0 0 33.867 33.867" xmlns="http://www.w3.org/2000/svg"><g transform="translate(0 -263.13)"><path transform="rotate(126.88 20.11 280.87)" d="m30.034 295.44c-2.4736 1.8552-28.064-9.0761-28.434-12.146s21.892-19.766 24.736-18.552 6.1721 28.843 3.6985 30.698z"></path></g></svg>'}},t={};function o(n){var r=t[n];if(void 0!==r)return r.exports;var i=t[n]={id:n,exports:{}};return e[n](i,i.exports,o),i.exports}o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.nc=void 0,(()=>{"use strict";var e=o(379),t=o.n(e),n=o(795),r=o.n(n),i=o(569),a=o.n(i),s=o(565),c=o.n(s),p=o(216),l=o.n(p),u=o(589),f=o.n(u),d=o(673),g={};g.styleTagTransform=f(),g.setAttributes=c(),g.insert=a().bind(null,"head"),g.domAPI=r(),g.insertStyleElement=l(),t()(d.Z,g),d.Z&&d.Z.locals&&d.Z.locals;var v=function(e){return{set:function(t){e.innerText=t}}},h=function(e,t){if("object"!=typeof e)throw{type:"TypeError",message:"expecting source to be a object"};if(t&&"object"!=typeof e)throw{type:"TypeError",message:"expecting destination to be a object"};for(var o in t||(t="[object Array]"===Object.prototype.toString.apply(e)?[]:{}),e)Object.prototype.hasOwnProperty.apply(e,[o])&&("object"!=typeof e[o]?t[o]=e[o]:t[o]=h(e[o]));return t},x=function(e){if("function"!=typeof e)throw{name:"TypeError",message:"expecting a function as first argument"};var t=Array.prototype.slice.apply(arguments,[1]);return function(){var o=Array.prototype.slice.apply(arguments);return e.apply(null,t.concat(o))}},b=function(){var e=[];return{publish:function(){var t;for(t=0;t<e.length;t++)"function"==typeof e[t]&&e[t].apply(null,arguments)},subscribe:function(t){return"function"==typeof t&&e.push(t),{unsubscribe:function(){var o=e.indexOf(t);e.splice(o,1)}}}}},m=function(e,t,o){var n=function(n,r,i,a){var s;switch(r.action){case o.actions.DEL:t.setPosition({pos:[i,a],value:0,level:0});break;case o.actions.MOVE:n&&n(i,a,r),t.setPosition({pos:[i,a],value:0,noview:!0,level:0});break;case o.actions.DOUBLE:var c=t.getTile(i,a);s=window.app2048.collision(c.value),t.setPosition({pos:[i,a],value:s,level:c.level+1,action:"double"}),"function"==typeof e&&e(s)}},r=function(e,o,n){t.getTile(e,o).value&&t.setPosition({pos:[e-n.distance,o],value:t.getTile(e,o).value,level:t.getTile(e,o).level,noview:!1,posFrom:[e,o]})},i=function(e,o,n){t.getTile(e,o).value&&t.setPosition({pos:[e+n.distance,o],value:t.getTile(e,o).value,level:t.getTile(e,o).level,noview:!1,posFrom:[e,o]})},a=function(e,o,n){t.getTile(e,o).value&&t.setPosition({pos:[e,o-n.distance],value:t.getTile(e,o).value,level:t.getTile(e,o).level,noview:!1,posFrom:[e,o]})},s=function(e,o,n){t.getTile(e,o).value&&t.setPosition({pos:[e,o+n.distance],value:t.getTile(e,o).value,level:t.getTile(e,o).level,noview:!1,posFrom:[e,o]})},c=function(e,t,r){return function(e,t,n){var r=!0,i=o.getActions(e,t).sort((function(e,t){return e.action-t.action}));return 0===o.getActions(e,t).filter((function(e){return e.action===o.actions.MOVE})).length&&(r=!1),i&&i.length>0&&i.forEach((function(o){n&&n(o,e,t)})),{movement:r}}(e,t,x(n,r))};return{up:function(e,t){return c(e,t,r)},down:function(e,t){return c(e,t,i)},left:function(e,t){return c(e,t,a)},right:function(e,t){return c(e,t,s)}}},y="set-score",w="add-score",k="set-game-over",S="unset-game-over",T=function(){return{type:S}},O=function(e,t){switch(t.type){case y:return Object.assign(e,{score:t.payload.score});case w:var o=e.score+t.payload.score;return o>e.highScore&&(e.highScore=o),Object.assign(e,{score:o});case"set-game-won":return Object.assign(e,{won:!0});case"unset-game-won":return Object.assign(e,{won:!1});case k:return Object.assign(e,{gameover:!0});case S:return Object.assign(e,{gameover:!1})}},z=function(e){var t=e.model,o=e.randomizer,n=e.winTile||2048,r=function(e,t){if(!t)throw{name:"TypeError",message:"reducer is not passed to the store"};if("function"!=typeof t)throw{name:"TypeError",message:"reducer should be a function"};e=e||{};var o=b(),n=function(){return h(e)},r=function(t){if("[object Array]"!==Object.prototype.toString.apply(t))throw{name:"TypeError",message:"expecting an array"};var o;try{o=t.reduce((function(e,t){return e[t]}),e)}catch(e){throw{name:"PathError",message:"property doesn't exist on the store"}}return"object"==typeof o?h(o):o};return{dispatch:function(i){e=t(e,i),o.publish(i,{getState:n,getFromPath:r})},doOnStateChange:o,getFromPath:r,getState:n,restore:function(t){t&&"object"==typeof t&&(e=Object.assign(e,t),o.publish({restore:!0},{getState:n,getFromPath:r}))}}}({highScore:0,score:0},O),i=b(),a=b(),s=b(),c=b(),p=b(),l=b(),u=function(e){r.dispatch(function(e){return{type:y,payload:{score:e}}}(e))};r.doOnStateChange.subscribe((function(e,t){if(e.restore)return(t=t.getState()).gameover&&c.publish(),t.won&&a.publish(),void i.publish({score:t.score,highScore:t.highScore||0});switch(e.type){case y:i.publish({score:t.getFromPath(["score"]),highScore:t.getFromPath(["highScore"])});break;case w:o=t.getFromPath(["score"]),r=t.getFromPath(["highScore"]),o===n&&a.publish(o),i.publish({score:o,highScore:r});break;case k:c.publish();break;case S:p.publish()}var o,r})),u(0);var f=function(e){var t=[],o=b(),n=b(),r=function(){return t.length};return{push:function(i){t.length<e?(t.push(i),o.publish(r())):(t.shift(),t.push(i)),n.publish(h(t))},maxSize:function(){return e},size:r,pop:function(){var e=t.pop();return e&&o.publish(r()),e||null},clean:function(){t=[],o.publish(0)},restore:function(e){t=e},doOnSizeChange:o,doOnStorePush:n}}(e.cacheSize||5),d=t.getSize(),g=function(e){var t={DOUBLE:0,MOVE:1,DEL:2};"number"!=typeof e&&(e=4);var o=function(){var t,o,n=[];for(t=0;t<e;t++)for(n.push([]),o=0;o<e;o++)n[t].push([]);return n},n=o();return{getMatrix:function(){return h(n)},get actions(){return t},addAction:function(e,o,r){e.action!==t.DEL&&n[o][r]?n[o][r].push(e):n[o][r]=[e]},reset:function(){n=o()},getActions:function(e,t){return n[e]&&n[e][t]}}}(d),v=x(m,(function(e){!function(e){r.dispatch(function(e){return{type:w,payload:{score:e}}}(e))}(e)})),z=function(e){var n={model:t.getModel(),state:r.getState()};if(function(e){var o,n,r=function(e,t){var o=0,n=0,r=[];return{decide:function(i,a){0===e.getTile(i,a).value?n++:e.getTile(i,a).value===o?(t.addAction({action:t.actions.DEL},r[0],r[1]),n++,t.addAction({action:t.actions.DOUBLE},i,a),t.addAction({action:t.actions.MOVE,distance:n},i,a),o=0):(o=e.getTile(i,a).value,0!==n&&t.addAction({action:t.actions.MOVE,distance:n},i,a),r=[i,a])},reset:function(){r=[],n=0,o=0}}}(t,g);switch(e){case 0:for(n=0;n<d;n++){for(o=0;o<d;o++)r.decide(o,n);r.reset()}break;case 1:for(n=0;n<d;n++){for(o=d-1;o>=0;o--)r.decide(o,n);r.reset()}break;case 2:for(o=0;o<d;o++){for(n=0;n<d;n++)r.decide(o,n);r.reset()}break;case 3:for(o=0;o<d;o++){for(n=d-1;n>=0;n--)r.decide(o,n);r.reset()}}}(e),function(e){var o,n,r=v(t,g),i=!1;switch(e){case 0:for(n=0;n<d;n++)for(o=0;o<d;o++)i=r.up(o,n).movement||i;break;case 1:for(n=0;n<d;n++)for(o=d-1;o>=0;o--)i=r.down(o,n).movement||i;break;case 2:for(o=0;o<d;o++)for(n=0;n<d;n++)i=r.left(o,n).movement||i;break;case 3:for(o=0;o<d;o++)for(n=d-1;n>=0;n--)i=r.right(o,n).movement||i}return g.reset(),{movement:i}}(e).movement){f.push(n),s.publish(n.model);var i=o.getNextPosition(),a=o.getNextNumber();setTimeout((function(){t.setPosition({pos:i,value:a,level:2===a?1:2}),function(e){var t,o,n,r=!1;e:for(t=0;t<d;t++)for(o=0;o<d;o++){if(0===(n=e.getTile(t,o).value)){r=!0;break e}if(r=n===e.getTile(t-1,o).value||n===e.getTile(t+1,o).value||n===e.getTile(t,o-1).value||n===e.getTile(t,o+1).value||r)break e}return r}(t)||r.dispatch({type:k}),l.publish({model:t.getModel(),state:r.getState()})}),100)}};return{left:function(){z(2)},right:function(){z(3)},up:function(){z(0)},down:function(){z(1)},reset:function(){t.reset(),f.clean(),u(0),r.dispatch(T());var e=o.getNextPosition(),n=o.getNextNumber();t.setPosition({pos:e,value:n,level:2===n?1:2}),l.publish({model:t.getModel(),state:r.getState()})},back:function(){var e=f.pop();t.setModel(e.model),e.state.gameover&&r.dispatch(T()),u(e.state.score)},restoreStore:function(e){f.restore(e),f.doOnSizeChange.publish(e.length)},restoreState:function(e){t.setModel(e.model),r.restore(e.state)},getModel:function(){return t.getModel()},start:function(){var e=o.getNextPosition(),n=o.getNextNumber();t.setPosition({pos:e,value:n,level:2===n?1:2}),f.doOnSizeChange.publish(0)},doOnBackSizeChange:f.doOnSizeChange,doOnModelReset:t.doOnModelReset,doOnMoveFinished:s,doOnGameOver:c,doOnGameOverReset:p,doOnStorePush:f.doOnStorePush,doOnAfterNewTile:l,doOnScoreChange:i,doOnWinTileReached:a}},q=function(e){var t=e.size,o=e.cacheSize,n=e.chanceOf2||90,r=e.winTile,i=e.store,a=function(e){var t=b(),o=b();e&&"number"==typeof e||(e=4);var n=function(e){var t,o,n=[];for(t=0;t<e;t++)for(n.push([]),o=0;o<e;o++)n[t].push({value:0,level:0});return n},r=function(e){var t,o,n=[];for(t=0;t<e;t++)for(o=0;o<e;o++)n.push({pos:[t,o],filled:!1});return n},i=n(e),a=r(e),s=function(e){var o=e.pos,n=e.value;null!==o&&(t.publish(e),i[o[0]][o[1]].value=n,i[o[0]][o[1]].level=e.level,a.filter((function(e){return e.pos[0]===o[0]&&e.pos[1]===o[1]}))[0].filled=!!n)},c=function(t){var o,n;for(o=0;o<e;o++)for(n=0;n<e;n++)s({pos:[o,n],value:t[o][n].value,level:t[o][n].level})};return{getModel:function(){return h(i)},getEmptyTiles:function(){return h(a.filter((function(e){return!e.filled})))},setPosition:s,getTile:function(e,t){var o=Array.prototype.slice.apply(arguments,[0]);return"[object Array]"===Object.prototype.toString.apply(o[0])&&(e=o[0][0],t=o[0][1]),i[e]&&i[e][t]},reset:function(){c(n(e)),a=r(e),o.publish()},setModel:c,getSize:function(){return e},doOnPositionChange:t,doOnModelReset:o}}(t),s=function(e,t){if("number"!=typeof e)throw{type:"TypeError",message:"expecting a number"};return e<=1||(e/=100),{getNextNumber:function(){return Math.random()<=e?2:4},getNextPosition:function(){var e,o,n=t.getEmptyTiles().length;return 0===n?null:t.getEmptyTiles()[(e=n-1,o=(""+e).length,Math.floor(Math.random()*Math.pow(10,o))%(e+1))].pos}}}(n,a),c=z({model:a,randomizer:s,cacheSize:o,winTile:r});i&&i.storage?setTimeout((function(){var e=`${t}-gamestate`,o=`${t}-currentstate`,n=localStorage.getItem(e);n&&c.restoreStore(JSON.parse(n));var r=localStorage.getItem(o);r?c.restoreState(JSON.parse(r)):c.start(),c.doOnStorePush.subscribe((function(t){localStorage.setItem(e,JSON.stringify(t))})),c.doOnAfterNewTile.subscribe((function(e){localStorage.setItem(o,JSON.stringify(e))})),c.doOnBackSizeChange.subscribe((function(t){0===t&&localStorage.setItem(e,"")}))}),0):setTimeout((function(){c.start()}),0);var p=h(Object.assign(c,{model:a}));return delete p.start,delete p.restoreStore,delete p.restoreState,p},E=o(368),C=o.n(E),M=o(835),P=o.n(M),N=function(e){var t=document.createElement("div");return t.className=e,t},j=function(e){var t=N("icon");return t.innerHTML=e,t},A=function(){document.body.innerHTML='<div class="heading">2048</div> <div class="action"> <div class="btn-container"> <div class="btn back"> <div class="refresh-count"></div> </div> <div class="btn refresh"></div> </div> <div class="score-container"> <div class="high-score">0</div> <div class="score">0</div> </div> </div> <div class="app"> <div class="game-over">Game Over</div> <div class="tile-container"></div> </div> <div class="credits"> <div>&copy; Ashutosh Padhi</div> <div>UX by Barkha</div> <div class="version"></div> </div> ',Element.prototype.setPositionClass=function(e){var t=this.className;t=t.replace(/\bf[0-9]{1,2}-[0-9]{1,2}/,"").replace(/\s+/," ").trim(),this.className=t+" f"+e.map((function(e){return""+(e+1)})).join("-")},Element.prototype.setNumberClass=function(e){var t=this.className;t=t.replace(/\bt[0-9]+\b/g,"").replace(/\s+/," ").trim(),this.className=t+" t"+e},Element.prototype.removeClass=function(e){var t=this.className;this.className=t.split(/\s/).filter((function(t){return t!==e})).join(" ")},Element.prototype.addClass=function(e){this.className=this.className+" "+e},function(e,t){var o,n,r;for(o=1;o<=5;o++){for(r=N("sqr-row"),n=1;n<=5;n++)r.appendChild(N("sqr sqr"+o+"-"+n));e.appendChild(r)}}(document.querySelector(".app"));var e,t=v(document.querySelector(".action .score")),o=v(document.querySelector(".action .high-score")),n=(e=document.querySelector(".app .game-over"),{set:function(){e.style.display="flex"},release:function(){e.style.display="none"}}),r=v(document.querySelector(".action .refresh-count")),i=q({size:5,cacheSize:5,chanceOf2:90,winTile:2048,store:{storage:localStorage}});!function(e){var t=document.querySelector(".tile-container"),o=[],n={};e.model.doOnPositionChange.subscribe((function(e){var r,i=e.pos,a=e.value,s=e.level,c=e.noview,p=e.posFrom;c||(p&&p.length>0?(r=n[p.toString()])&&(r.setPositionClass(i),r.setNumberClass(s),r.innerText=a,n[i.toString()]=r,r.removeClass("newtile"),delete n[p.toString()]):a?((r=n[i.toString()])||(0===o.length?r=function(){var e=document.createElement("div");return e.className="tile newtile",e}():(r=o.pop()).addClass("newtile"),n[i.toString()]=r,t.appendChild(r)),r.setPositionClass(i),r.setNumberClass(s),r.innerText=a,"double"===e.action&&(r.removeClass("movetile"),r.offsetWidth,r.addClass("movetile"))):(r=n[i.toString()])&&(t.removeChild(r),r.removeClass("newtile"),r.removeClass("movetile"),o.push(r),delete n[i.toString()]))}))}(i);var a=document.querySelector(".action .btn.refresh");a.appendChild(j(C())),a.addEventListener("click",(function(){i.reset()}));var s,c=document.querySelector(".action .btn.back");c.appendChild(j(P())),c.addEventListener("click",(function(){i.back()})),i.doOnBackSizeChange.subscribe((function(e){r.set(e)})),i.doOnGameOver.subscribe((function(){n.set()})),i.doOnGameOverReset.subscribe((function(){n.release()})),i.doOnScoreChange.subscribe((function(e){t.set(e.score),o.set(e.highScore)})),function(e,t,o){var n=null,r=null;if(o=o||0,!e)throw{name:"TypeError",message:"expected a HTMLElement but recieved "+e};if(!t||"function"!=typeof t)throw{name:"TypeError",message:"expected a proper event callback function"};e.addEventListener("touchstart",(function(e){e.touches.length<2&&(n=[e.touches[0].clientX,e.touches[0].clientY]),e.preventDefault()})),e.addEventListener("touchend",(function(e){var i,a;n&&(i=(r=[e.changedTouches[0].clientX,e.changedTouches[0].clientY])[0]-n[0],a=r[1]-n[1],(Math.abs(i)>=o||Math.abs(a)>=o)&&(Math.abs(i)>Math.abs(a)?t(i>0?{event:e,type:"right"}:{event:e,type:"left"}):t(a>0?{event:e,type:"down"}:{event:e,type:"up"}))),n=null,r=null,e.preventDefault()}))}(document.querySelector(".app"),(s=(new Date).getTime(),function(e){var t=(new Date).getTime();if(t>s+100)switch(e.type){case"down":i.down();break;case"right":i.right();break;case"up":i.up();break;case"left":i.left()}s=t}),10),document.body.addEventListener("keydown",function(){var e=(new Date).getTime();return function(t){var o=(new Date).getTime();if(o>e+100)switch(t.keyCode){case 40:i.down();break;case 39:i.right();break;case 38:i.up();break;case 37:i.left()}e=o}}())};window.onload=function(){window.app2048={collision:new Function("return arguments[0]+1")},A(),document.querySelector(".version").innerText="v0.6.1"}})()})();